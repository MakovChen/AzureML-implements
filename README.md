# 於AzureML部署客製化模型及存取
【撰寫時間：2023/4/30 writen by Markov Chen】

2023 AI EXPO向我們展示大模型的時代已經來臨，Winner-Take-All的趨勢商業結構改變了整個產業的商業價值與定位，許多業者也重新開始思考高階人才對於公司而言是甚麼樣的存在？從工作價值、職責規劃到適任條件，該如何面對新時代的職場生態是每個人都須認清的課題。

資訊科技從過去 **[材料能源]>[電腦]>[通訊技術]>[伺服器]>[巨量數據]** 發展到現在的 **[AI/區塊鏈]** ，每個主題在其所處的時代都會有其結構性的關鍵工作。而經歷了將近百年多研究的AI也成為了現代所有研發量能的核心，無論是化學、電機、機械、電子或資訊或是其它相關領域，過去在工程上難以分析處理的數學、統計問題都在這項技術的幫助下迎刃而解，藉此衍伸出更高的 **"服務/產品"** 水準，因此業界也開始出現了一種專門為不同主題提供AI解決方案的新工作 -*「資料科學家」*。

近幾個月迅速崛起的生成式AI對於**產品導向**的半導體及電子相關產業而言也無疑是一項激勵，無論是自動化製造、知識管理、客戶服務或人機協同都增強了對資料科學的依賴。然而，這些內容對硬體設備的規格與要求也急遽提升，例如：NVIDIA在一顆V100 GPU的情況下要訓練出1024 * 1024的影像生成模型[StyleGAN3](https://nvlabs-fi-cdn.nvidia.com/stylegan3/stylegan3-paper.pdf)大約就需要92年的時間。尤其是考慮到擁有多個事業群的企業，龐大的資料中心與計算的時間、成本將會是AI導入的關鍵。除了那些擁有關鍵資源的網路巨擘，我們很難想像每間企業都能夠擁有自己獨立的大模型訓練伺服器(就像是說他們通通都要有google規模等級的機房)，除了在經濟上不切實際之外，這樣無疑也會對全球ESG帶來沉重的負擔。因此，這些處於結構洞的網路巨擘紛紛開始起到領頭羊的角色，透過**雲端**向企業們提供AI應用開發的關鍵資源，諸如資料中心、GPU運算、Foundation模型、線上推論API、環境工具...等，希望能夠藉由這樣的專業化分工幫助各個產業更好地發揮其本身所具有的商業價值。

對於大部分的"非資深"的一般資料科學家，我們所要考量的不應只局限於模型的優化與調校(這主要也是理論型學者的工作)，而是更著重於這些現成的AI模型在產業上該如何應用。雲端的開發能力便是其中不可或缺的基本功，因為混合Edge和Cloud的工作環境將會成為業界的一種常態(它們之間如何取捨則需視各家的資安規範而定)，但不可否認的是它絕對會是一種更為高效的開發模式，並且雲端服務的供應商也有提供更為完善的開發資源與介面。因此，這個`repository`的目的就是希望透過實際部署的釋例，來讓大家理解其所帶來的開發效率與便利性。

## 目錄

- [開發環境介紹](#背景)
    - [PCB-AoI公開資料集](#)
    - [平台的種類與選擇](#)
    - [AzureML](#)

## 開發環境介紹
### PCB-AoI公開資料集
表面貼焊技術(Surface-mount technology, SMT)對於電子封裝而言是非常重要的製程，各式各樣的晶片、元件會先被擺放在對應的位置，再透過自動化設備將pin腳焊接到電路載板的端口上。而焊接的好壞對於這塊PCB面板的處理效能、穩定性與防水性都是會有非常顯著的影響，例如：焊錫太厚會使電子傳輸速度變慢而導致Lag；焊錫太少則可能會產生接觸不良或是滲入雜質而損毀元件。因此在製程的中/後段便會透過AoI儀器檢查出現瑕疵的區域，以此使封裝設備能自動地識別出問題的所在，並即時對其進行維護和補救。

<img src="https://i.imgur.com/GbiF40l.png" width = "500"/><br>
深度學習在這類光學影像的應用也不勝枚舉，因此本文將會以**ViT模型對PCB進行瑕疵檢測的個案**進行演示。而在資料集中大約只有230筆樣本，可是為了更方便地說明雲端的開發流程，所以在這裡先不做任何額外的增強來進行實驗。

### 平台的種類與選擇
電子產業的PCB-AoI只能算是一個小型的個案，而我們真正的要考量的其實是生成式AI在導入各種應用情境時所面臨的問題。首先，雖然網路大廠所提供的Funodation Models已經幫我們減少上億級別的訓練開銷，但是針對企業內部資料所做的**fine-tuning**同樣也是不小的成本負擔。這時，我們或許就可以考慮向以下幾個雲端平台租借伺服器來做運算，不僅能夠很方便地取用各種規格的**GPU**(有點像共享經濟的機制，但不同平台所支援的類型也會稍有不同)，而且按用量付費也能夠使企業資金更有效率，不必為了做AI而綁在價格昂貴且不經常使用的設備上。ㄒ

下表便列出了幾個商用等級的雲端平台，並且比較了他們所支援的GPU種類：
![](https://i.imgur.com/CJoI8uZ.png)
![](https://i.imgur.com/xJ3jZdA.png)
*[擷取自NVIDIA官方網站]*

* 使用這些平台的基本門檻
    * VISA金融卡/信用卡(申辦帳戶需要填寫)
    * Jupyter Notebook - Python機器學習理論與實務
    * Container、Image及restAPI等基礎觀念

### AzureML 
Machine Learning Studio
![](https://i.imgur.com/f44swbx.png)

[Machine Learning Studio]>[PCB-AoI Workspace]>[Launch Studio]
